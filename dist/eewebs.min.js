var conn=null,signs=null,world_id=window.location.hash.substr(1);
window.location.hash?(PlayerIO.useSecureApiRequests=!0,PlayerIO.authenticate("everybody-edits-su9rn58o40itdbnw69plyw","simpleUsers",{username:"guest",password:"guest"},{},function(a){a.bigDB.load("config","config",function(d){a.multiplayer.useSecureConnections=!0;a.multiplayer.createJoinRoom(world_id,"Everybodyedits"+d.version,!0,null,null,function(a){conn=a;a.addMessageCallback("*",on_message);a.send("init")},callback_error)},callback_error)},callback_error)):alert("You must provide a world to load the webpage from!");
function on_message(a){if("init"==a.type){conn.disconnect();var d="";jsparse(a).filter(function(a){return 385==a.id}).sort(function(a,c){return a.x>c.x?1:0}).sort(function(a,c){return a.y>c.y?1:0}).forEach(function(a){d+=a.args[1]});a=document.createElement("iframe");a.width="100%";a.height="100%";a.frameBorder="0";document.body.getElementsByTagName("div")[0].appendChild(a);a.contentWindow.document.open();a.contentWindow.document.write(d);a.contentWindow.document.close()}}
function callback_error(a){console.log("error: "+a.code+": "+a.message)}
jsparse=function(a){var d=[];if("init"==a.type||"reset"==a.type){var b=a.length,c=[],g=[],e=a._internal_("get-objects");for(a=a._internal_("get-types");"we"!=e[--b];);for(;"ws"!=e[--b];)c.push(e[b]),g.push(a[b]);b=0;do{for(e=[];(7!=g[b]||7!=g[b+1]||0!=g[b+2]||1!=g[b+3])&&!(e.push(c[b++]),b>c.length););if(b<=c.length){a=c[b++];var h=c[b++],k=c[b++],l=c[b++];if(h.length==a.length)for(var f=0;f<h.length;f+=2)d.push({layer:k,id:l,args:e,x:h[f]<<8|h[f+1],y:a[f]<<8|a[f+1]})}}while(b<=c.length);return d}};